Ansible Complete Configuration Guide

---

## 1Ô∏è‚É£ Order of Configuration Files

Ansible applies configuration files in the following order (highest priority first):

1. \$ANSIBLE\_CONFIG environment variable
2. ./ansible.cfg in the current working directory
3. \~/.ansible.cfg in the home directory
4. /etc/ansible/ansible.cfg system-wide default

The last file found in this order overrides the previous ones.

---

## 2Ô∏è‚É£ Inventory & Hosts

* Defines target machines.
* Example:

all:
hosts:
web01:
ansible\_host: 172.31.28.42
ansible\_user: ubuntu
ansible\_ssh\_private\_key\_file: /home/ubuntu/exercises/exercise1/clientkey.pem

* Important parameters:

  * ansible\_host ‚Üí IP/hostname of target
  * ansible\_user ‚Üí SSH username
  * ansible\_ssh\_private\_key\_file ‚Üí SSH key file
  * ansible\_port ‚Üí SSH port (if not 22)

---

## 3Ô∏è‚É£ Connection Settings

* remote\_user ‚Üí default SSH user
* private\_key\_file ‚Üí default key
* become ‚Üí sudo usage
* timeout ‚Üí SSH timeout

Example in ansible.cfg:

\[defaults]
remote\_user = ubuntu
private\_key\_file = \~/exercises/exercise1/clientkey.pem
host\_key\_checking = False
timeout = 30

---

## 4Ô∏è‚É£ Privilege Escalation

* become, become\_user, become\_method
* Example:

\[privilege\_escalation]
become=True
become\_user=root
become\_method=sudo

---

## 5Ô∏è‚É£ Retry / Forks / Parallelism

* forks ‚Üí number of parallel hosts (default 5)
* retry\_files\_enabled ‚Üí enable/disable .retry files

Example:

\[defaults]
forks = 10
retry\_files\_enabled = False

---

## 6Ô∏è‚É£ Logging

* log\_path ‚Üí location for logs

Example:

\[defaults]
log\_path = /home/ubuntu/ansible.log

---

## 7Ô∏è‚É£ Callback Plugins

* stdout\_callback ‚Üí format output
* Example:

\[defaults]
stdout\_callback = yaml

---

## 8Ô∏è‚É£ Timeout and Pipelining

* timeout ‚Üí SSH timeout in seconds
* pipelining=True ‚Üí speeds up sudo tasks

\[ssh\_connection]
timeout=30
pipelining=True

---

## 9Ô∏è‚É£ Gathering Facts

* Control whether Ansible collects host facts
* Options: smart, implicit, explicit, never

\[defaults]
gathering = smart

---

## üîü Idempotency

* Ansible is idempotent: re-running a playbook only makes changes if necessary.

---

## ‚úÖ Most Important Settings

1. Inventory host configuration (ansible\_host, ansible\_user, ansible\_ssh\_private\_key\_file)
2. become and become\_method for root tasks
3. Connection timeout and pipelining
4. Logging for troubleshooting
5. SSH key checking (host\_key\_checking=False) for dev/test environments
